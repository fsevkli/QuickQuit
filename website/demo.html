<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Meta Tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="QuickQuit is a free Chrome extension designed to enhance online safety and privacy. Instantly replace sensitive browsing history and exit websites discreetly with just one click. Perfect for vulnerable users seeking protection online.">
  <!-- Page Title -->
  <title>QuickQuit - How It Works</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

  <!-- Prism CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />

  <!-- Custom Stylesheet -->
  <link rel="stylesheet" href="quickquit.css">

  <!-- jQuery (for Bootstrap functionality) -->
  <script src="https://code.jquery.com/jquery-3.6.3.min.js"
    integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

  <!-- Custom JavaScript -->
  <script src="quickquit.js"></script>

  <!-- Favicon -->
  <link rel="icon" href="qqLogo.ico" type="image/x-icon">
</head>

<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom sticky-top">
    <div class="container-fluid">
        <img src="src/qqLogoTransparent.svg" alt="QuickQuit Logo" style="width: 50px;">
        <a class="navbar-brand" href="https://quickquit.app">QuickQuit</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav">
                <a class="nav-link" href="https://www.quickquit.app/howItWorks">How It Works</a>
                <a class="nav-link" href="https://www.quickquit.app/demo">Button Demo</a>
                <a class="nav-link" href="https://www.quickquit.app/aboutUs">About Us</a>
            </div>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link github-link" href="#" id="viewGitHubButton">
                        <img src="src/github-mark.png" alt="GitHub Logo" height="50" width="50">
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
  <script>
    document.getElementById("viewGitHubButton").addEventListener("click", function() {
      window.location.href = "https://github.com/fsevkli/getMeOut";
    });
  </script>

  <!-- Main Content Section -->
  <main class="container py-5">
    <h1>Demo Page</h1>      

    <!-- Textbox for code input -->
    <div class="mb-3">
      <p>By clicking this button, and with our extension installed, quickquit.app will be removed from your browser's history and replaced with weather, news, and sports sites. 
        You will then exit to google.com. 
        The sites removed and exit site are completely customizable on our How It Works page.
      </p>
      <label for="codeInput" class="form-label">Paste your code:</label>
      <textarea class="form-control" id="codeInput" rows="5" placeholder="Paste your code here..."></textarea>
    </div>
    
    <!-- Button that appears when there is code input -->
    <div class="d-flex justify-content-center align-items-center vh-50">
      <button id="quickQuitButton" class="btn btn-primary btn-lg" style="display:none;">
        Get Me Out!
      </button>
    </div>
    
  </main>

  <script>
    window.onload = function() {
        let domains = "";
        let safeContent = "";
        let exitSite = "";
        
        // Function to decode HTML entities
        function decodeHTMLEntities(text) {
            const textarea = document.createElement('textarea');
            textarea.innerHTML = text;
            return textarea.value;
        }

        // Function to extract data attributes from script tag
        function extractDataFromScript(scriptText) {
            const domainsMatch = scriptText.match(/data-domains="([^"]+)"/);
            const safeContentMatch = scriptText.match(/data-safe-content="([^"]+)"/);
            const exitSiteMatch = scriptText.match(/data-exit-site="([^"]+)"/);

            return {
                domains: domainsMatch ? domainsMatch[1] : "",
                safeContent: safeContentMatch ? safeContentMatch[1] : "music",
                exitSite: exitSiteMatch ? exitSiteMatch[1] : "https://google.com"
            };
        }

        // Function to create or update QuickQuit button
        function updateQuickQuitButton(exitSite) {
            let quickQuitButton = document.getElementById('quickQuitButton');
            
            // Create button if it doesn't exist
            if (!quickQuitButton) {
                quickQuitButton = document.createElement('button');
                quickQuitButton.id = 'quickQuitButton';
                document.body.appendChild(quickQuitButton);
            }

            // Update button styles
            quickQuitButton.style.position = 'fixed';
            quickQuitButton.style.bottom = '10px';
            quickQuitButton.style.right = '10px';
            quickQuitButton.style.backgroundColor = 'red';
            quickQuitButton.style.color = 'white';
            quickQuitButton.style.border = 'none';
            quickQuitButton.style.padding = '10px 20px';
            quickQuitButton.style.fontSize = '16px';
            quickQuitButton.style.cursor = 'pointer';
            quickQuitButton.style.zIndex = '1000';

            // Update button text and functionality
            if (exitSite) {
                const domain = new URL(exitSite).hostname;
                quickQuitButton.textContent = `Exit to ${domain}`;
                quickQuitButton.onclick = function() {
                    window.location.href = exitSite;
                };
            } else {
                quickQuitButton.textContent = "Get Me Out!";
                quickQuitButton.onclick = function() {
                    alert("No exit site defined.");
                };
            }

            quickQuitButton.style.display = 'block';
        }

        // Event listener for textarea input
        document.getElementById('codeInput').addEventListener('input', function() {
            const codeInput = this.value;
            
            if (codeInput.trim() === '') {
                const button = document.getElementById('quickQuitButton');
                if (button) button.style.display = 'none';
                return;
            }

            // Decode HTML entities if present
            const decodedInput = decodeHTMLEntities(codeInput);
            
            // Extract data from script tag
            const scriptMatch = decodedInput.match(/<script[^>]*src="[^"]*quickquit\.js"[^>]*>/);
            if (scriptMatch) {
                const scriptTag = scriptMatch[0];
                const data = extractDataFromScript(scriptTag);
                exitSite = data.exitSite;
                domains = data.domains;
                safeContent = data.safeContent;
                updateQuickQuitButton(exitSite);
            }
        });
    };
</script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <!-- Prism JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

</body>

<!-- Footer -->
<footer class="footer">
  <div class="container">
    <div class="row align-items-start">
      <!-- Contact Information -->
      <div class="col-md-4 contact-section">
        <h5>Contact Us</h5>
        <p class="contact-name">Dr. Kurt Johnson</p>
        <p class="contact-email">Email: <a href="mailto:johnsok9@miamioh.edu">johnsok9@miamioh.edu</a></p>
        <address class="contact-address">
          <p class="address-title">Address:</p>
          501 E High St<br>
          Oxford, OH 45056<br>
          United States
        </address>
      </div>

      <!-- Navigation Links -->
      <div class="col-md-4">
        <nav class="footer-nav">
          <ul class="list-unstyled">
            <li><a href="https://quickquit.app">Home</a></li>
            <li><a href="https://quickquit.app/aboutUs">About Us</a></li>
            <li><a href="https://quickquit.app/howItWorks">How It Works</a></li>
            <li><a href="https://quickquit.app/demo">Button Demo</a></li>
            <li><a href="https://github.com/fsevkli/getMeOut" target="_blank">GitHub Repository</a></li>
          </ul>
        </nav>
      </div>

      <!-- Miami Logo -->
      <div class="col-md-4 text-end footer-logo">
        <a href="https://miamioh.edu/index.html" target="_blank" class="logo-link">
          <img src="src/miamiULogo.png" alt="Miami University Logo" class="logo-img">
        </a>        
      </div>
    </div>
  </div>

  <!-- Copyright Section -->
  <div class="footer-copyright">
    <div class="container">
      Â© 2025 QuickQuit. All rights reserved
    </div>
  </div>
</footer>

</html>
